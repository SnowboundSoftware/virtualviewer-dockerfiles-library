/*
Copyright (c) Jim Garvin (http://github.com/coderifous), 2008.
Dual licensed under the GPL (http://dev.jquery.com/browser/trunk/jquery/GPL-LICENSE.txt) and MIT (http://dev.jquery.com/browser/trunk/jquery/MIT-LICENSE.txt) licenses.
Written by Jim Garvin (@coderifous) for use on LMGTFY.com.
http://github.com/coderifous/jquery-localize
Based off of Keith Wood's Localisation jQuery plugin.
http://keith-wood.name/localisation.html
 */

!function(n){var t;return t=function(n){return n=n.replace(/_/,"-").toLowerCase(),n.length>3&&(n=n.substring(0,3)+n.substring(3).toUpperCase()),n},n.defaultLanguage=t(navigator.language||navigator.userLanguage),n.localize=function(e,r){var a,l,u,i,o,c,f,s,g,h,p,b,v,d,x,j,k;return null==r&&(r={}),k=this,u={},l=r.fileExtension||"json",c=function(n,t,e){var a;switch(null==e&&(e=1),e){case 1:return u={},r.loadBase?(a=n+("."+l),i(a,n,t,e)):c(n,t,2);case 2:if(t.length>=2)return a=n+"-"+t.substring(0,2)+"."+l,i(a,n,t,e);break;case 3:if(t.length>=5)return a=n+"-"+t.substring(0,5)+"."+l,i(a,n,t,e)}},i=function(t,e,a,l){var i,o,f;return null!=r.pathPrefix&&(t=r.pathPrefix+"/"+t),f=function(t){return n.extend(u,t),b(u),c(e,a,l+1)},o=function(){if(r.fallback&&r.fallback!==a)return c(e,r.fallback)},i={url:t,dataType:"json",async:!1,timeout:null!=r.timeout?r.timeout:500,success:f,error:o},"file:"===window.location.protocol&&(i.error=function(t){return f(n.parseJSON(t.responseText))}),n.ajax(i)},b=function(n){return null!=r.callback?r.callback(n,a):a(n)},a=function(t){return n.localize.data[e]=t,k.each(function(){var e,r,a;if(e=n(this),r=e.data("localize"),r||(r=e.attr("rel").match(/localize\[(.*?)\]/)[1]),a=j(r,t),null!=a)return f(e,r,a)})},f=function(t,e,r){if(t.is("input")?h(t,e,r):t.is("textarea")?h(t,e,r):t.is("img")?g(t,e,r):t.is("optgroup")?p(t,e,r):n.isPlainObject(r)||t.html(r),n.isPlainObject(r))return s(t,r)},h=function(t,e,r){var a;return a=n.isPlainObject(r)?r.value:r,t.is("[placeholder]")?t.attr("placeholder",a):t.val(a)},s=function(n,t){return d(n,"title",t),d(n,"href",t),x(n,"text",t)},p=function(n,t,e){return n.attr("label",e)},g=function(n,t,e){return d(n,"alt",e),d(n,"src",e)},j=function(n,t){var e,r,a,l;for(r=n.split(/\./),l=t,e=0,a=r.length;e<a;e++)n=r[e],l=null!=l?l[n]:null;return l},d=function(n,t,e){if(e=j(t,e),null!=e)return n.attr(t,e)},x=function(n,t,e){if(e=j(t,e),null!=e)return n.text(e)},v=function(n){var t;return"string"==typeof n?"^"+n+"$":null!=n.length?function(){var e,r,a;for(a=[],e=0,r=n.length;e<r;e++)t=n[e],a.push(v(t));return a}().join("|"):n},o=t(r.language?r.language:n.defaultLanguage),r.skipLanguage&&o.match(v(r.skipLanguage))||c(e,o,1),k},n.fn.localize=n.localize,n.localize.data={}}(jQuery);