if(typeof beforeVirtualViewerInit!=="function"){function beforeVirtualViewerInit(){}}if(typeof afterVirtualViewerInit!=="function"){function afterVirtualViewerInit(){startAlfresco()}}function startAlfresco(){virtualViewer.initViaURL();authTicket=decodeURIComponent(parseParameterCore(window.location.href,"clientInstanceId"));authTicket=authTicket.replace(/\n|\r/g,"");var a=JSON.parse(authTicket);var b=$(".vvToggleFullScreen > .icon");b.toggle(a.enableToggleFullScreen);virtualViewer.setCallback("onLoadUsername",function(c){var d=a.username;virtualViewer.setUsername(d)})}function parseParameterCore(a,c){var d="";var b=a.match(new RegExp(c,"i"));var e=a.indexOf(b+"=");if(e===-1){return null}d=a.substring(e+c.length+1);e=d.indexOf("&");if(e>-1){d=d.slice(0,e)}return d}function toggleFullScreen(){var a=$(".vvToggleFullScreen > .icon");if(a.hasClass("minimize")){parent.postMessage("vvMinimize","*")}else{parent.postMessage("vvMaximize","*")}a.toggleClass("minimize")};